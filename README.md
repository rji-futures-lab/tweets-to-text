# Tweets-To-Text

TweetsToText is a bot that lives on Twitter. It collects your tweets into plain text files. So you can take your brilliant observations somewhere else.

[![Build Status](https://travis-ci.org/rji-futures-lab/tweets-to-text.svg?branch=master)](https://travis-ci.org/rji-futures-lab/tweets-to-text)
[![Coverage Status](https://coveralls.io/repos/github/rji-futures-lab/tweets-to-text/badge.svg?branch=master)](https://coveralls.io/github/rji-futures-lab/tweets-to-text?branch=master)

## How it works:

1. Follow [@TweetsToText](https://twitter.com/TweetsToText). It sends you a welcoming direct message.
2. Mention @TweetsToText before you start tweet-stormin'.
3. Mention @TweetsToText again in your final tweet.
4. Check your DMs. @TweetsToText will send you a link where you can download your text file.
5. Do whatever. You can copy and paste the text into your favorite text editor or your CMS, or share the link (which is public) with your editor or whoever).

## Development notes

TweetsToText is built atop Twitter's [Account Activity API](https://developer.twitter.com/en/docs/accounts-and-users/subscribe-account-activity/overview), which is designed for receiving and responding to events such as direct messages and account mentions on Twitter.

The deployed instance is subscribed to activity on the TweetsToText Twitter account. However, when working on improvements to the app, we need to avoid any disruptions for our actual users. Therefore, local instances of the app will subscribe to a [separate testing account](https://twitter.com/T2Tproto).

In order to subscribe to account activity, we must register a webhook: A url at which our app can receive messages from Twitter. We can use [ngrok](https://ngrok.com/) to expose our localhost server to the public internet with HTTPS.

So if you haven't already, [download](https://ngrok.com/download) and install ngrok.

Navigate into the tweets-to-text project directory, activate your virtual environment, and start the local server:

```sh
python manage.py runserver
```

Now open a separate terminal window (or tab), and start ngrok:

```sh
ngrok http 8000
```

Now we have a tunnel from the public internet to our local server. We can test this by copying the url in ngrok's output that looks like `https://{random characters}.ngrok.io`, and pasting this into web browser address bar. We should see the homepage for TweetsToText.

Finally, we have to register a webhook under the temporary domain generated by ngrok. At this point we need to open *yet another terminal window (or tab)* because we have to leave both the local webserver and ngrok running.

Navigate into the tweets-to-text project directory, activate your virtual environment, and call this handy management command with the temporary ngrok domain:

```sh
python manage.py replacewebhook '{random characters}.ngrok.io'
```

Hopefully the output of the management command will indicate, and now you can start working on improvments to TweetsToText.
